)]}'
{"version":3,"file":"\\packages\\oauth.js","sources":["oauth/oauth_client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,W;;AAEA,yD;AACA,E;AACA,oF;AACA,kC;AACA,mF;AACA,4E;AACA,W;AACA,uE;AACA,wD;AACA,qG;AACA,gE;AACA,gC;AACA,Q;AACA,4C;AACA,8C;;AAEA,+C;AACA,S;AACA,iF;AACA,sC;AACA,gE;AACA,mE;AACA,iB;AACA,mE;AACA,oE;AACA,qE;AACA,wB;AACA,a;AACA,K;;AAEA,sB;AACA,oC;AACA,yD;AACA,K;AACA,U;AACA,E;;;AAGA,sD;AACA,qD;AACA,6C;AACA,qD;AACA,4C;AACA,2D;AACA,wD;AACA,6D;AACA,iE;AACA,wB;;AAEA,oE;AACA,kE;AACA,gD;AACA,iD;AACA,0D;AACA,uE;;AAEA,sD;AACA,sB;AACA,sB;AACA,mB;AACA,E","sourcesContent":["Oauth = {};\r\n\r\n// Open a popup window pointing to a OAuth handshake page\r\n//\r\n// @param credentialToken {String} The OAuth credentialToken generated by the client\r\n// @param url {String} url to page\r\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\r\n//   completion. Takes one argument, credentialToken on success, or Error on\r\n//   error.\r\n// @param dimensions {optional Object(width, height)} The dimensions of\r\n//   the popup. If not passed defaults to something sane\r\nOauth.initiateLogin = function(credentialToken, url, credentialRequestCompleteCallback, dimensions) {\r\n  // default dimensions that worked well for facebook and google\r\n  var popup = openCenteredPopup(\r\n    url,\r\n    (dimensions && dimensions.width) || 650,\r\n    (dimensions && dimensions.height) || 331);\r\n\r\n  var checkPopupOpen = setInterval(function() {\r\n    try {\r\n      // Fix for #328 - added a second test criteria (popup.closed === undefined)\r\n      // to humour this Android quirk:\r\n      // http://code.google.com/p/android/issues/detail?id=21061\r\n      var popupClosed = popup.closed || popup.closed === undefined;\r\n    } catch (e) {\r\n      // For some unknown reason, IE9 (and others?) sometimes (when\r\n      // the popup closes too quickly?) throws \"SCRIPT16386: No such\r\n      // interface supported\" when trying to read 'popup.closed'. Try\r\n      // again in 100ms.\r\n      return;\r\n    }\r\n\r\n    if (popupClosed) {\r\n      clearInterval(checkPopupOpen);\r\n      credentialRequestCompleteCallback(credentialToken);\r\n    }\r\n  }, 100);\r\n};\r\n\r\n\r\nvar openCenteredPopup = function(url, width, height) {\r\n  var screenX = typeof window.screenX !== 'undefined'\r\n        ? window.screenX : window.screenLeft;\r\n  var screenY = typeof window.screenY !== 'undefined'\r\n        ? window.screenY : window.screenTop;\r\n  var outerWidth = typeof window.outerWidth !== 'undefined'\r\n        ? window.outerWidth : document.body.clientWidth;\r\n  var outerHeight = typeof window.outerHeight !== 'undefined'\r\n        ? window.outerHeight : (document.body.clientHeight - 22);\r\n  // XXX what is the 22?\r\n\r\n  // Use `outerWidth - width` and `outerHeight - height` for help in\r\n  // positioning the popup centered relative to the current window\r\n  var left = screenX + (outerWidth - width) / 2;\r\n  var top = screenY + (outerHeight - height) / 2;\r\n  var features = ('width=' + width + ',height=' + height +\r\n                  ',left=' + left + ',top=' + top + ',scrollbars=yes');\r\n\r\n  var newwindow = window.open(url, 'Login', features);\r\n  if (newwindow.focus)\r\n    newwindow.focus();\r\n  return newwindow;\r\n};\r\n"]}